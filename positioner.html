<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>SRJ Logo Positioner v3 ‚Äî With Reference</title>

<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: radial-gradient(circle at top, #001530, #000814);
    color: #fff;
    text-align: center;
    margin: 0;
    overflow-x: hidden;
  }

  h1 {
    margin: 20px 0 10px;
    font-size: 1.7rem;
    color: #00aaff;
  }

  .upload-box {
    background: rgba(0, 50, 100, 0.3);
    border: 1px solid rgba(0,150,255,0.4);
    border-radius: 10px;
    padding: 10px;
    display: inline-block;
    margin: 5px;
  }

  #canvas-area {
    position: relative;
    width: 340px;
    height: 340px;
    margin: 15px auto;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(0,150,255,0.3);
    border-radius: 10px;
    overflow: hidden;
    touch-action: none;
  }

  /* Reference background (tools.png) */
  #reference-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0.35;
    object-fit: contain;
    pointer-events: none;
  }

  .layer {
    position: absolute;
    cursor: move;
    user-select: none;
    touch-action: none;
    transition: transform 0.05s ease-out;
  }

  .slider-group {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin: 5px 0;
  }

  input[type="range"] {
    width: 150px;
  }

  #info {
    background: rgba(0, 50, 100, 0.3);
    border-radius: 10px;
    padding: 10px;
    width: 85%;
    margin: 10px auto;
    font-size: 0.9rem;
    color: #a9bcd0;
  }

  button {
    background: linear-gradient(to right, #00aaff, #0077ff);
    border: none;
    border-radius: 8px;
    padding: 10px 20px;
    color: white;
    font-weight: 600;
    cursor: pointer;
    margin-top: 8px;
  }

  #css-output {
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(0,150,255,0.3);
    border-radius: 8px;
    padding: 10px;
    margin: 10px auto;
    width: 85%;
    color: #00ccff;
    font-family: monospace;
    text-align: left;
    word-wrap: break-word;
    white-space: pre-wrap;
  }
</style>
</head>

<body>
  <h1>‚öôÔ∏è SRJ Logo Positioner v3 (with tools.png Reference)</h1>

  <!-- Uploads -->
  <div>
    <div class="upload-box">
      <label>Cloud:</label><br>
      <input type="file" id="cloudInput" accept="image/*">
    </div>
    <div class="upload-box">
      <label>Gear:</label><br>
      <input type="file" id="gearInput" accept="image/*">
    </div>
    <div class="upload-box">
      <label>Center:</label><br>
      <input type="file" id="centerInput" accept="image/*">
    </div>
    <div class="upload-box">
      <label>Reference (tools.png):</label><br>
      <input type="file" id="referenceInput" accept="image/*">
    </div>
  </div>

  <!-- Canvas Area -->
  <div id="canvas-area">
    <img id="reference-bg" alt="reference background">
  </div>

  <!-- Resize -->
  <div class="slider-group">
    <label>Resize Active:</label>
    <input type="range" id="resizeRange" min="10" max="100" value="50">
  </div>

  <div id="info">Upload reference (tools.png) + your 3 logo parts, align perfectly üëá</div>
  <button onclick="copyCSS()">üìã Copy CSS</button>
  <pre id="css-output">Upload and move images to see CSS here...</pre>

<script>
const area = document.getElementById('canvas-area');
const output = document.getElementById('css-output');
const resizeRange = document.getElementById('resizeRange');
const refBg = document.getElementById('reference-bg');
let layers = {}, activeLayer = null;

// Uploads
function handleUpload(input, type) {
  const file = input.files[0];
  if (!file) return;

  if (type === 'reference') {
    refBg.src = URL.createObjectURL(file);
    return;
  }

  const img = document.createElement('img');
  img.className = 'layer';
  img.dataset.type = type;
  img.draggable = false;
  img.style.width = '100px';
  img.style.left = '50%';
  img.style.top = '50%';
  img.style.transform = 'translate(-50%, -50%)';
  img.style.zIndex = type === 'cloud' ? 1 : type === 'gear' ? 2 : 3;
  img.src = URL.createObjectURL(file);
  img.onload = () => updateCSS();
  layers[type] = img;
  area.appendChild(img);
  enableMove(img);
}

// Move logic
function enableMove(el) {
  const move = (e) => {
    e.preventDefault();
    const rect = area.getBoundingClientRect();
    const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
    const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
    el.style.left = `${x - el.offsetWidth / 2}px`;
    el.style.top = `${y - el.offsetHeight / 2}px`;
    updateCSS();
  };

  el.addEventListener('touchstart', (e) => {
    e.preventDefault();
    activeLayer = el;
    document.body.style.overflow = 'hidden';
    document.addEventListener('touchmove', move);
    document.addEventListener('touchend', () => {
      document.removeEventListener('touchmove', move);
      document.body.style.overflow = 'auto';
    }, { once: true });
  });

  el.addEventListener('mousedown', (e) => {
    e.preventDefault();
    activeLayer = el;
    document.body.style.overflow = 'hidden';
    document.addEventListener('mousemove', move);
    document.addEventListener('mouseup', () => {
      document.removeEventListener('mousemove', move);
      document.body.style.overflow = 'auto';
    }, { once: true });
  });
}

// Resize active layer
resizeRange.addEventListener('input', () => {
  if (!activeLayer) return;
  activeLayer.style.width = resizeRange.value + '%';
  updateCSS();
});

// CSS update
function updateCSS() {
  const rect = area.getBoundingClientRect();
  let cssText = '';

  for (const key in layers) {
    const el = layers[key];
    const box = el.getBoundingClientRect();
    const topPct = (((box.top - rect.top) / rect.height) * 100).toFixed(2);
    const leftPct = (((box.left - rect.left) / rect.width) * 100).toFixed(2);
    const widthPct = ((box.width / rect.width) * 100).toFixed(2);
    cssText += `
.${key} {
  top: ${topPct}%;
  left: ${leftPct}%;
  width: ${widthPct}%;
  z-index: ${el.style.zIndex};
}\n`;
  }
  output.textContent = cssText.trim();
}

// Copy CSS
function copyCSS() {
  navigator.clipboard.writeText(output.textContent);
  alert("‚úÖ CSS copied! Paste it into style.css");
}

// Inputs
document.getElementById('cloudInput').addEventListener('change', e => handleUpload(e.target, 'cloud'));
document.getElementById('gearInput').addEventListener('change', e => handleUpload(e.target, 'gear'));
document.getElementById('centerInput').addEventListener('change', e => handleUpload(e.target, 'center'));
document.getElementById('referenceInput').addEventListener('change', e => handleUpload(e.target, 'reference'));
</script>
</body>
</html>