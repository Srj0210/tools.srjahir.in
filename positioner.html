<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SRJ Tools Logo Positioner (v2.0)</title>
<style>
body {
  background: radial-gradient(circle at top center, #001530 0%, #000814 70%);
  color: #00aaff;
  font-family: "Poppins", sans-serif;
  text-align: center;
  margin: 0;
  padding: 30px 0;
}
#workspace {
  position: relative;
  width: 180px;
  height: 160px;
  margin: 0 auto;
  border: 1px solid rgba(0,150,255,0.3);
  border-radius: 12px;
  overflow: hidden;
  background: rgba(0, 25, 55, 0.4);
}
#workspace img {
  position: absolute;
  transform: translate(-50%, -50%);
  cursor: move;
  user-select: none;
  touch-action: none;
}
#ref {
  opacity: 0.35;
  width: 100%;
  height: auto;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;
}
.controls {
  margin-top: 25px;
}
label {
  display: block;
  margin-top: 10px;
  font-size: 0.9rem;
  color: #a9bcd0;
}
textarea {
  width: 90%;
  height: 150px;
  background: rgba(0, 25, 55, 0.7);
  color: #00aaff;
  border: 1px solid rgba(0,150,255,0.25);
  border-radius: 10px;
  margin-top: 15px;
  padding: 10px;
}
button {
  background: linear-gradient(135deg, #0077ff, #00aaff);
  border: none;
  color: white;
  padding: 10px 20px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 600;
  margin-top: 10px;
}
.range-control {
  width: 60%;
  margin: 5px 0 15px;
}
</style>
</head>
<body>

<h2>‚öôÔ∏è SRJ Tools Logo Positioner v2.0</h2>
<p>Exact SRJahir Tools environment (180√ó160px)</p>

<div id="workspace">
  <img id="ref" alt="reference">
  <img id="cloud">
  <img id="gear">
  <img id="center">
</div>

<div class="controls">
  <label>Reference Image (tools.png):</label>
  <input type="file" accept="image/*" id="uploadRef">

  <label>Cloud Layer:</label>
  <input type="file" accept="image/*" id="uploadCloud">
  <input type="range" min="20" max="200" value="100" id="resizeCloud" class="range-control">

  <label>Gear Layer:</label>
  <input type="file" accept="image/*" id="uploadGear">
  <input type="range" min="20" max="200" value="100" id="resizeGear" class="range-control">

  <label>Center Layer:</label>
  <input type="file" accept="image/*" id="uploadCenter">
  <input type="range" min="20" max="200" value="100" id="resizeCenter" class="range-control">

  <textarea id="output" readonly></textarea><br>
  <button onclick="copyCSS()">üìã Copy CSS</button>
</div>

<script>
const parts = ["cloud","gear","center"];
parts.forEach(id => makeDraggable(document.getElementById(id)));

function makeDraggable(el) {
  let dragging=false, offsetX=0, offsetY=0;
  el.addEventListener("mousedown",start);
  el.addEventListener("touchstart",start);
  function start(e){
    e.preventDefault();
    dragging=true;
    const rect=el.getBoundingClientRect();
    offsetX=(e.touches?e.touches[0].clientX:e.clientX)-rect.left;
    offsetY=(e.touches?e.touches[0].clientY:e.clientY)-rect.top;
    document.addEventListener("mousemove",move);
    document.addEventListener("touchmove",move);
    document.addEventListener("mouseup",stop);
    document.addEventListener("touchend",stop);
  }
  function move(e){
    if(!dragging) return;
    const ws=document.getElementById("workspace").getBoundingClientRect();
    const x=(e.touches?e.touches[0].clientX:e.clientX)-ws.left-offsetX;
    const y=(e.touches?e.touches[0].clientY:e.clientY)-ws.top-offsetY;
    const cx=Math.max(0,Math.min(ws.width,x));
    const cy=Math.max(0,Math.min(ws.height,y));
    el.style.left=`${cx}px`;
    el.style.top=`${cy}px`;
    updateCSS();
  }
  function stop(){
    dragging=false;
    document.removeEventListener("mousemove",move);
    document.removeEventListener("touchmove",move);
  }
}

function updateCSS(){
  const ws=document.getElementById("workspace").getBoundingClientRect();
  let css="";
  parts.forEach(id=>{
    const el=document.getElementById(id);
    if (!el.src) return;
    const rect=el.getBoundingClientRect();
    const top=((rect.top-ws.top+rect.height/2)/ws.height*100).toFixed(2);
    const left=((rect.left-ws.left+rect.width/2)/ws.width*100).toFixed(2);
    const width=(rect.width/ws.width*100).toFixed(2);
    css+=`.${id} {\n  top: ${top}%;\n  left: ${left}%;\n  width: ${width}%;\n  z-index: ${parts.indexOf(id)+1};\n}\n\n`;
  });
  document.getElementById("output").value=css;
}

function copyCSS(){
  navigator.clipboard.writeText(document.getElementById("output").value);
  alert("Copied CSS!");
}

document.getElementById("uploadRef").addEventListener("change",e=>{
  const f=e.target.files[0];
  if(f) document.getElementById("ref").src=URL.createObjectURL(f);
});
document.getElementById("uploadCloud").addEventListener("change",e=>{
  const f=e.target.files[0];
  if(f) document.getElementById("cloud").src=URL.createObjectURL(f);
});
document.getElementById("uploadGear").addEventListener("change",e=>{
  const f=e.target.files[0];
  if(f) document.getElementById("gear").src=URL.createObjectURL(f);
});
document.getElementById("uploadCenter").addEventListener("change",e=>{
  const f=e.target.files[0];
  if(f) document.getElementById("center").src=URL.createObjectURL(f);
});

/* Resize sliders */
document.getElementById("resizeCloud").addEventListener("input",()=>resize("cloud"));
document.getElementById("resizeGear").addEventListener("input",()=>resize("gear"));
document.getElementById("resizeCenter").addEventListener("input",()=>resize("center"));

function resize(id){
  const val=document.getElementById("resize"+capitalize(id)).value;
  const el=document.getElementById(id);
  el.style.width=val+"%";
  updateCSS();
}
function capitalize(str){return str.charAt(0).toUpperCase()+str.slice(1);}
</script>

</body>
</html>
